;***************************************************
; sneskit template
;***************************************************

.include "snes.inc"

.global _nmi, main

;===============================================================
	.zeropage
;===============================================================

;...insert some zeropage variables

;===============================================================
	.code
;===============================================================

	.a8
	.i16

;---------------------------------------------------------------
; program entry point
;===============================================================
main:
;===============================================================
	lda	#0Fh			; enable screen
	sta	REG_INIDISP		;
	
	lda	#0			; mess with the palette
:	stz	REG_CGADD		;
	sta	REG_CGDATA		;
	xba				;
	sta	REG_CGDATA		;
	xba				;
	rep	#20h			;
	ina				;
	sep	#20h			;
	bra	:-			;
	
	
;---------------------------------------------------------------
; NMI irq handler
;===============================================================
_nmi:
;===============================================================
	rep	#30h			; push a,x,y
	pha				;
	phx				;
	phy				;-----------------------
	sep	#20h			; 8bit akku
					;
;---------------------------------------
;TODO: insert vblank code
;---------------------------------------
					;
	lda	REG_TIMEUP		; read from REG_TIMEUP (?)
					;
	rep	#30h			; pop a,x,y
	ply				;
	plx				;
	pla				;
	rti				; return

;===============================================================
	.segment "HDATA"
	.segment "HRAM"
	.segment "HRAM2"
;===============================================================
